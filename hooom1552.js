function loadTopics(a,b){"string"===typeof b&&(b=document.getElementById(b));initially_loaded&&avac_editor.loading(!1,"Loading forum...");$(b).load(a+" .forumbg, .topic-actions .pagination",function(){"/f15-"===a?$(".bg_none",b).prepend('<li class="row row2"><dl class="icon" style="background-image:url(\'http://illiweb.com/fa/subsilver/folder_announce.gif\');"><dd class="dterm" title=""> Redirect: <div class="topic-title-container"><h2 class="topic-title hierarchy"><a class="topictitle" href="#" onclick="selectForum(document.getElementById(\'row0\'), 18); return false;">AvacWeb Chat Plugins</a></h2></div></dd></dl></li>'):
"f9-"===a&&$(".bg_none",b).prepend('<li class="row row2"><dl class="icon" style="background-image:url(\'http://illiweb.com/fa/subsilver/folder_announce.gif\');"><dd class="dterm" title=""> Redirect: <div class="topic-title-container"><h2 class="topic-title hierarchy"><a class="topictitle" href="#" onclick="loadTopics(\'f20-\', \'innerf9\'); return false;">Premium Tutorials</a></h2></div></dd></dl></li>');displayAvs(b);initially_loaded&&avac_editor.loading(!0);ajax_pagination(function(a){loadTopics(a,
b);history.pushState&&history.pushState({func:"loadTopics",args:[a,b.id]},"",a)});initially_loaded=!0})}window.initially_loaded=!1;
function selectForum(a,b){loadTopics("/f"+b+"-","selectedforum");"string"==typeof a&&(a=document.getElementById(a));var f=select(".selectedForum",a.parentNode)[0];f&&(f.className="LGforumlink");a.className="selectedForum";document.getElementById("selectedTitle").innerHTML=" - "+a.firstChild.nodeValue;document.getElementById("tabvisitforum").innerHTML='<a href="/f'+b+'-"><span class="lgbutton">Visit Forum</span></a>';document.getElementById("tabmarktopics").innerHTML='<a href="/f'+b+'-?mark=topics"><span class="lgbutton">Mark Topics Read</span></a>';
document.getElementById("tabnewtopic").innerHTML='<a href="/post?f='+b+'&mode=newtopic"><span class="lgbutton">New Topic</span></a>';history.pushState&&history.pushState({func:"selectForum",args:[a.id,b]},a.firstChild.nodeValue,initially_loaded?"/f"+b+"-"+a.firstChild.nodeValue.replace(/\s/g,"-"):"")}
function loadFs(){var a=document.getElementById("checknew");$(a).load("/c1- .forums",function(){array_walk("e",select(".row",a),function(a,f){a.id="realrow"+f});shownew()});1!==$user.id&&12!==$user.id||$("#bilde").show()}
function shownew(){if(!(1>$user.id)){array_walk("e",select("#selectforumlinks div"),function(a){var b=document.getElementById("real"+a.id);b&&0<b.firstChild.getAttribute("style").indexOf("unread")&&a.lastChild&&"lgnew"!==a.lastChild.className&&(b=select(".lastpost",b)[0],b=b.getElementsByTagName("a")[2].href,a.innerHTML+='<a href="'+b+'" class="lgnew">New</a>')});log("Ive added all the little NEW icons to the forum list now.");var a=select(".icon",document.getElementById("checknew")),b=a.length,f=
0<a[b-1].getAttribute("style").indexOf("unread"),g=0<a[b-2].getAttribute("style").indexOf("unread"),a=0<a[b-3].getAttribute("style").indexOf("unread"),b=document.getElementById("stafftab"),k=document.getElementById("premiumtab"),h=document.getElementById("tuts"),c=select(".h3",document.getElementById("left"))[2],c=staff_or_premium(c);"s"===c?(log("According to our scripts, your a staff member, so we have looked for new posts in the staff tab and premium tab"),f&&(b.style.background="orange"),g&&(k.style.background=
"orange"),a&&(h.style.background="orange"),$user.staff=!0):"p"===c?(log("According to our scripts, your a premium member, so we have looked for new posts in the premium tab"),f&&(k.style.background="orange"),g&&(h.style.background="orange")):f&&(h.style.background="orange")}}
$(function(){var a=select(".module",document.getElementById("left")),b=document.getElementById("onlinestats");b.innerHTML=a[0].innerHTML+a[1].innerHTML;0<$user.id&&(a=select(".h3",a[2])[0],"s"===staff_or_premium(a)?(document.getElementById("premiumtab").style.display="",document.getElementById("stafftab").style.display="",document.body.className="staff",$user.staff=!0):(document.getElementById("premiumtab").style.display="none",document.getElementById("stafftab").style.display="none"));a=b.firstChild.getElementsByTagName("a");
array_walk("e",a,function(a){var b=user_id_href(a.href);if(b){var b=get_user_avatar(b),c=a.innerHTML.replace(/<[^>]+?>/g,"");a.innerHTML='<img src="'+b+'" class="tlistAv tip" rel="'+c+'">';a.nextSibling.nodeValue=""}});add_tip_listeners(b);log("Loading the recent topics...");var f=document.getElementById("avacweb_recents"),g=function(a,b){return(b=a.getElementsByTagName(b)[0])&&b.firstChild&&b.firstChild.nodeValue||""};$.get("http://www.avacweb.com/feed",function(a){log("And now I can edit and add the avatars to the recent topics :)");
a=a.getElementsByTagName("item");for(var b=0,c=null,e='<div class="news_topics">';c=a[b++];){var d=g(c,"title"),l=g(c,"description"),m=g(c,"comments"),n=g(c,"pubDate"),c=c.getElementsByTagName("guid")[0].nextSibling.firstChild.nodeValue,e=e+('<div class="news_topic"><img class="tlistAv" src="'+get_user_avatar(c)+'"><a href="'+m+'" class="news_topic_title" onmouseover="$(this.nextSibling).show()" onmouseout="$(this.nextSibling).hide()">'+d+"</a>"),e=e+('<div class="news_topic_desc" style="display:none">'+
LGBB.parse(l)+'</div><span class="news_topic_author">'+c+'</span><span class="news_topic_time">'+n+"</span></div>");if(5<=b)break}f.innerHTML=e+"</div>"});$.get("/viewonline",function(a){var b=$(".forumbg tbody tr",a.substring(a.indexOf("<body"),a.indexOf("</body>")));a=0;for(var c={},e;e=b[a++];){var d=e.getElementsByTagName("td");e=d[0].innerHTML.replace(/<.*?>/g,"");(d=d[2].getElementsByTagName("a")[0])&&d.href.match(/\/f[0-9]+-/)&&(d=d.href.match(/\/f[0-9]+-/)[0],d in c?(c[d].count++,c[d].users.push(e)):
c[d]={count:1,users:[e]})}a=0;for(titles=select("div",document.getElementById("selectforumlinks"));t=titles[a++];)b="/f"+t.getAttribute("onclick").replace(/[^0-9]/g,"")+"-",t.innerHTML+=b&&b in c?'<span class="viewing">'+c[b].count+" Viewing</span>":'<span class="viewing">0 Viewing</span>'})});


/* Homepage tabs. */
(function(){"undefined"==typeof Spry&&(window.Spry={});Spry.Widget||(Spry.Widget={});Spry.Widget.TabbedPanels=function(a,b){this.element=this.getElement(a);this.defaultTab=0;this.tabSelectedClass="TabbedPanelsTabSelected";this.tabHoverClass="TabbedPanelsTabHover";this.tabFocusedClass="TabbedPanelsTabFocused";this.panelVisibleClass="TabbedPanelsContentVisible";this.focusElement=null;this.hasFocus=false;this.currentTabIndex=0;this.enableKeyboardNavigation=true;this.nextPanelKeyCode=Spry.Widget.TabbedPanels.KEY_RIGHT;this.previousPanelKeyCode=Spry.Widget.TabbedPanels.KEY_LEFT;Spry.Widget.TabbedPanels.setOptions(this,b);if(typeof this.defaultTab=="number"){if(this.defaultTab<0)this.defaultTab=0;else{var c=this.getTabbedPanelCount();if(this.defaultTab>=c)this.defaultTab=c>1?c-1:0}this.defaultTab=this.getTabs()[this.defaultTab]}if(this.defaultTab)this.defaultTab=this.getElement(this.defaultTab);this.attachBehaviors()};Spry.Widget.TabbedPanels.prototype.getElement=function(a){return a&&typeof a=="string"?document.getElementById(a):a};Spry.Widget.TabbedPanels.prototype.getElementChildren=function(a){for(var b=[],a=a.firstChild;a;){a.nodeType==1&&b.push(a);a=a.nextSibling}return b};Spry.Widget.TabbedPanels.prototype.addClassName=function(a,b){if(a&&b&&!(a.className&&a.className.search(RegExp("\\b"+b+"\\b"))!=-1))a.className=a.className+((a.className?" ":"")+b)};Spry.Widget.TabbedPanels.prototype.removeClassName=function(a,b){if(a&&b&&!(a.className&&a.className.search(RegExp("\\b"+b+"\\b"))==-1))a.className=a.className.replace(RegExp("\\s*\\b"+b+"\\b","g"),"")};Spry.Widget.TabbedPanels.setOptions=function(a,b,c){if(b)for(var d in b)c&&b[d]==void 0||(a[d]=b[d])};Spry.Widget.TabbedPanels.prototype.getTabGroup=function(){if(this.element){var a=this.getElementChildren(this.element);if(a.length)return a[0]}return null};Spry.Widget.TabbedPanels.prototype.getTabs=function(){var a=[],b=this.getTabGroup();b&&(a=this.getElementChildren(b));return a};Spry.Widget.TabbedPanels.prototype.getContentPanelGroup=function(){if(this.element){var a=this.getElementChildren(this.element);if(a.length>1)return a[1]}return null};Spry.Widget.TabbedPanels.prototype.getContentPanels=function(){var a=[],b=this.getContentPanelGroup();b&&(a=this.getElementChildren(b));return a};Spry.Widget.TabbedPanels.prototype.getIndex=function(a,b){if((a=this.getElement(a))&&b&&b.length)for(var c=0;c<b.length;c++)if(a==b[c])return c;return-1};Spry.Widget.TabbedPanels.prototype.getTabIndex=function(a){var b=this.getIndex(a,this.getTabs());b<0&&(b=this.getIndex(a,this.getContentPanels()));return b};Spry.Widget.TabbedPanels.prototype.getCurrentTabIndex=function(){return this.currentTabIndex};Spry.Widget.TabbedPanels.prototype.getTabbedPanelCount=function(){return Math.min(this.getTabs().length,this.getContentPanels().length)};Spry.Widget.TabbedPanels.addEventListener=function(a,b,c,d){try{a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)}catch(e){}};Spry.Widget.TabbedPanels.prototype.cancelEvent=function(a){a.preventDefault?a.preventDefault():a.returnValue=false;a.stopPropagation?a.stopPropagation():a.cancelBubble=true;return false};Spry.Widget.TabbedPanels.prototype.onTabClick=function(a,b){this.showPanel(b);return this.cancelEvent(a)};Spry.Widget.TabbedPanels.prototype.onTabMouseOver=function(a,b){this.addClassName(b,this.tabHoverClass);return false};Spry.Widget.TabbedPanels.prototype.onTabMouseOut=function(a,b){this.removeClassName(b,this.tabHoverClass);return false};Spry.Widget.TabbedPanels.prototype.onTabFocus=function(a,b){this.hasFocus=true;this.addClassName(b,this.tabFocusedClass);return false};Spry.Widget.TabbedPanels.prototype.onTabBlur=function(a,b){this.hasFocus=false;this.removeClassName(b,this.tabFocusedClass);return false};Spry.Widget.TabbedPanels.KEY_UP=38;Spry.Widget.TabbedPanels.KEY_DOWN=40;Spry.Widget.TabbedPanels.KEY_LEFT=37;Spry.Widget.TabbedPanels.KEY_RIGHT=39;Spry.Widget.TabbedPanels.prototype.onTabKeyDown=function(a,b){var c=a.keyCode;if(!this.hasFocus||c!=this.previousPanelKeyCode&&c!=this.nextPanelKeyCode)return true;for(var d=this.getTabs(),e=0;e<d.length;e++)if(d[e]==b){var f=false;c==this.previousPanelKeyCode&&e>0?f=d[e-1]:c==this.nextPanelKeyCode&&e<d.length-1&&(f=d[e+1]);if(f){this.showPanel(f);f.focus();break}}return this.cancelEvent(a)};Spry.Widget.TabbedPanels.prototype.preorderTraversal=function(a,b){var c=false;if(a){c=b(a);if(a.hasChildNodes())for(var d=a.firstChild;!c&&d;){c=this.preorderTraversal(d,b);try{d=d.nextSibling}catch(e){d=null}}}return c};Spry.Widget.TabbedPanels.prototype.addPanelEventListeners=function(a){var b=this;Spry.Widget.TabbedPanels.addEventListener(a,"click",function(c){return b.onTabClick(c,a)},false);Spry.Widget.TabbedPanels.addEventListener(a,"mouseover",function(c){return b.onTabMouseOver(c,a)},false);Spry.Widget.TabbedPanels.addEventListener(a,"mouseout",function(c){return b.onTabMouseOut(c,a)},false);if(this.enableKeyboardNavigation){var c=null,d=null;this.preorderTraversal(a,function(b){if(b.nodeType==1){if(a.attributes.getNamedItem("tabindex")){c=b;return true}!d&&b.nodeName.toLowerCase()=="a"&&(d=b)}return false});if(c)this.focusElement=c;else if(d)this.focusElement=d;if(this.focusElement){Spry.Widget.TabbedPanels.addEventListener(this.focusElement,"focus",function(c){return b.onTabFocus(c,a)},false);Spry.Widget.TabbedPanels.addEventListener(this.focusElement,"blur",function(c){return b.onTabBlur(c,a)},false);Spry.Widget.TabbedPanels.addEventListener(this.focusElement,"keydown",function(c){return b.onTabKeyDown(c,a)},false)}}};Spry.Widget.TabbedPanels.prototype.showPanel=function(a){var b=-1,b=typeof a=="number"?a:this.getTabIndex(a);if(!(!b<0||b>=this.getTabbedPanelCount())){for(var a=this.getTabs(),c=this.getContentPanels(),d=Math.max(a.length,c.length),e=0;e<d;e++)if(e!=b){a[e]&&this.removeClassName(a[e],this.tabSelectedClass);if(c[e]){this.removeClassName(c[e],this.panelVisibleClass);c[e].style.display="none"}}this.addClassName(a[b],this.tabSelectedClass);this.addClassName(c[b],this.panelVisibleClass);c[b].style.display="block";this.currentTabIndex=b}};Spry.Widget.TabbedPanels.prototype.attachBehaviors=function(){for(var a=this.getTabs(),b=this.getContentPanels(),c=this.getTabbedPanelCount(),d=0;d<c;d++)this.addPanelEventListeners(a[d],b[d]);this.showPanel(this.defaultTab)}})();
